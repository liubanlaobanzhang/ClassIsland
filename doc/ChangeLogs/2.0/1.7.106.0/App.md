# 1.7.106.0

> [!warning]
> # 警告！请不要使用此版本
>
> 当前版本为 2.0 的测试版，部分功能可能不稳定或不支持，请谨慎使用。

<img src="https://res.classisland.tech/stickers/2.png" height="75" width="75" alt="白厄_再见" title="白厄_再见"/>

2.0 - Khaslana（卡厄斯兰那） Release Preview 1

## 🚀 新增功能与优化

- 【更新】应用更新功能
- 【恢复】移植恢复功能
- 【提醒】新提醒遮罩动画
- 【应用】优化应用生命周期初始化步骤
- 【天气】引入 lucide 天气图标包，提升天气提醒可读性
- 【档案迁移】CSES 导出/导入功能，以及 ClassIsland1 和 Class Widgets 1 档案导入功能
- 【主界面】优化置顶置底实现方式
- 【主界面】修复主界面提醒图标可读性低的问题
- 【应用设置】为 macOS 上的应用设置窗口添加红绿灯空位
- 【应用设置】优化设置界面导航栏图标大小
- 【组件/课表】课表换课标记高亮使用荧光笔样式+主题色
- 【UI】优化 Markdown 文本样式
- 【自动化】工作流运行状态指示器
- 【欢迎】在欢迎页面添加数据迁移、加入管理和进入恢复模式选项
- 【集控】集控策略禁用彩蛋功能
- 【集控】集控核心版本兼容性检测
- 【平台/Windows】支持切换渲染模式
- 【平台/MacOS】Macos 通知 api 适配
- 【API/UI】引入图标表达式
- 【API/档案迁移】自定义档案迁移提供方接口

## 🐛 Bug 修复

- 【应用】ClassIsland 多开 ([#1199](https://github.com/ClassIsland/ClassIsland/issues/1199))
- 【应用】修复 GetRootWindow 会返回没有显示的窗口的问题
- 【应用】将默认颜色来源修改为【系统】 ([#1328](https://github.com/ClassIsland/ClassIsland/issues/1328))
- 【主界面】修复主界面置顶锁重复添加导致提醒结束后置顶锁未释放干净，主界面无法恢复默认状态的问题 ([#1326](https://github.com/ClassIsland/ClassIsland/issues/1326))
- 【主界面】修复在没有启用 RawInput 的情况下 WndProc 不挂钩的问题
- 【主界面】修复主界面元素能被意外聚焦的问题 ([#1301](https://github.com/ClassIsland/ClassIsland/issues/1301))
- 【主界面】修复主界面提醒遮罩颜色不更新的问题 ([#1327](https://github.com/ClassIsland/ClassIsland/issues/1327))
- 【提醒】修复主界面宽度过低导致较长的提醒遮罩无法完全显示的问题
- 【提醒】修复找不到音频设备导致提醒时崩溃的问题
- 【提醒】修复 Fluent 主题提醒遮罩宽度变化时内容抖动的问题
- 【提醒】修复提醒 ui 一系列奇奇怪怪的问题 ([#1379](https://github.com/ClassIsland/ClassIsland/issues/1379))
- 【提醒】修复在特定情况下播放提醒崩溃的问题
- 【提醒】修复在播放链式提醒时，在特定情况下没有向提醒请求附加频道和请求信息的问题 ([#1353](https://github.com/ClassIsland/ClassIsland/issues/1353))
- 【组件/课表】修复 LessonsListBox 不继承主界面的外观设置的问题 ([#1318](https://github.com/ClassIsland/ClassIsland/issues/1318))
- 【组件/课表】修复在使用特定字体时课表组件的文字往下飘的问题
- 【组件/课表】修复课程表组件特定状态下课程表信息不更新的问题
- 【组件/课表】修复换课高亮标记不显示的问题
- 【组件/倒计时】修复按课表计算的倒计时包含未启用的课程的问题
- 【组件/倒计时】修复倒计时组件字重硬编码的问题 ([#1405](https://github.com/ClassIsland/ClassIsland/issues/1405))
- 【天气】修复 fluent 天气图标向上飘的问题 ([#1402](https://github.com/ClassIsland/ClassIsland/issues/1402))
- 【天气】修复天气图标外观问题 ([#1402](https://github.com/ClassIsland/ClassIsland/issues/1402))
- 【UI】最大轮换周数可以被设置为小数 ([#1265](https://github.com/ClassIsland/ClassIsland/issues/1265))
- 【UI】修复 FileBrowserButton 和 RunActionSettingsControl 在打开文件选择器时没有正确获得模态的问题
- 【UI】修复 HyperlinkButton 向上飘的问题
- 【UI】RulesetControl.axaml 异常出现横向滚动条。
- 【应用设置】修复外观设置中的行间隔文本框被截断的问题 ([#1324](https://github.com/ClassIsland/ClassIsland/issues/1324))
- 【平台/Windows】修复 FilePicker 冻结的问题 ([#1333](https://github.com/ClassIsland/ClassIsland/issues/1333))([#1244](https://github.com/ClassIsland/ClassIsland/issues/1244))
- 【平台/Windows】修复 aum id 过长致堆损坏的问题
- 【平台/Windows】修复在 Windows 下退出应用时任务栏图标残留的问题
- 【平台/Windows】修复 Windows环境下复制出现 COMException 的问题 ([#1403](https://github.com/ClassIsland/ClassIsland/issues/1403))
- 【平台/X11】修复窗口因 override_redirect 属性未完全应用，导致在启动时处于非默认窗口位置时出现遮挡点击、窗口错位、无法置顶等问题，及无法切换置顶和置底状态的问题 ([#1358](https://github.com/ClassIsland/ClassIsland/issues/1358)) ([#1273](https://github.com/ClassIsland/ClassIsland/issues/1273))
- 【平台/MacOS】撤销 ([#1205](https://github.com/ClassIsland/ClassIsland/issues/1205))，修复 MacOS 上应用提示损坏的问题 ([#1330](https://github.com/ClassIsland/ClassIsland/issues/1330))
- 【平台/MacOS】修复在 macos 上打开文件窗口崩溃的问题
- 【平台/MacOS】修复规则集在 macos 上无法判断前台窗口是否最大化的问题
- 【平台/MacOS】修复 macos 下定位服务不能正常工作的问题
- 【平台/FreeDesktop】修复在 linux 下当自启动目录不存在时无法创建自启动项目的问题 ([#1355](https://github.com/ClassIsland/ClassIsland/issues/1355))
- 【规则集】修复自动化规则集：前台窗口类名/标题 处理函数实现颠倒的问题
- 【换课】修复多个换课窗口 (([#1366](https://github.com/ClassIsland/ClassIsland/issues/1366)))
- 【档案迁移】修复Cses时间表不被导入的问题
- 【档案迁移】修复无法导入课表的问题
- 【档案编辑器】修复档案编辑器的帮助按钮无法点击的问题
- 【Dev】修复 DevPortalWindow 的超链接无法导航到 classisland: 协议的问题
- 【Markdown】修复代码块导致 Markdown 文档无法渲染的问题

## ◀️ 回滚的功能

- 【平台/Windows】回滚使用 OverlayPopups 修复在 Windows Popup 导致打开文件选择窗口时应用冻结的问题的措施 ([#1334](https://github.com/ClassIsland/ClassIsland/issues/1334))
- 【平台/MacOS】恢复档案编辑窗口标题栏以提高可用性


<!-- generated by git-cliff -->
